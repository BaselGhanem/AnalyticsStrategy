<!DOCTYPE html>
<html lang="en" class="scroll-smooth bg-slate-50">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics Strategy & Operations | Basel Ghanem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            DEFAULT: '#099999',
                            dark: '#066666',
                            light: '#14cccc',
                            bg: '#f0fbfb',
                            muted: '#e0f2f2'
                        },
                        slate: {
                            850: '#151e2e',
                            900: '#0f172a',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    boxShadow: {
                        'glass': '0 4px 30px rgba(0, 0, 0, 0.05)',
                        'premium': '0 10px 40px -10px rgba(9, 153, 153, 0.15)',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap');
        
        body { font-family: 'Inter', sans-serif; }
        
        /* Premium Animations & Transitions */
        .fade-in-up {
            opacity: 0;
            transform: translateY(24px);
            transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1), transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .fade-in-up.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .glass-panel {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .premium-card {
            background: linear-gradient(145deg, #ffffff 0%, #fcfcfc 100%);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(226, 232, 240, 0.8);
        }
        .premium-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px -15px rgba(9, 153, 153, 0.12);
            border-color: rgba(9, 153, 153, 0.2);
        }

        /* Skeleton Loading */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #f8f8f8 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 4px;
        }
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Chart constraints */
        .chart-container {
            position: relative;
            height: 320px;
            width: 100%;
        }

        /* Custom Scrollbar for Table */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #099999; 
        }

        /* Sortable Table Headers */
        th.sortable {
            cursor: pointer;
            transition: background-color 0.2s;
        }
        th.sortable:hover {
            background-color: #f8fafc;
        }
        
        /* Print Styles for PDF Export Simulation */
        @media print {
            body { background: white; }
            nav, header, section:not(#dashboard), .no-print { display: none !important; }
            .premium-card { box-shadow: none; border: 1px solid #ddd; }
        }
    </style>
</head>
<body class="text-slate-800 antialiased selection:bg-brand selection:text-white">

<nav class="fixed w-full z-50 glass-panel border-b border-gray-200/50 shadow-sm transition-all duration-300">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16 items-center">
            <div class="flex-shrink-0 flex items-center gap-2 group cursor-pointer">
                <div class="bg-brand/10 p-2 rounded-lg group-hover:bg-brand transition-colors duration-300">
                    <i data-lucide="bar-chart-2" class="text-brand group-hover:text-white transition-colors duration-300 h-5 w-5"></i>
                </div>
                <span class="font-bold text-xl text-slate-850 tracking-tight">Analytics<span class="text-brand font-extrabold">Strategy</span></span>
            </div>
            <div class="hidden md:flex items-center space-x-1 lg:space-x-4 text-sm font-medium text-slate-600">
                <a href="#executive" class="px-3 py-2 rounded-md hover:bg-slate-100 hover:text-slate-900 transition-colors">Executive Summary</a>
                <a href="#architecture" class="px-3 py-2 rounded-md hover:bg-slate-100 hover:text-slate-900 transition-colors">Architecture</a>
                <a href="#strategy" class="px-3 py-2 rounded-md hover:bg-slate-100 hover:text-slate-900 transition-colors">Strategy</a>
                <a href="#dashboard" class="ml-4 bg-slate-900 text-white px-5 py-2.5 rounded-lg shadow-md hover:bg-brand hover:shadow-premium transition-all duration-300 flex items-center gap-2">
                    <i data-lucide="layout-dashboard" class="w-4 h-4"></i> Enter App
                </a>
            </div>
        </div>
    </div>
</nav>

<header class="relative pt-32 pb-24 px-6 max-w-7xl mx-auto text-center md:text-left fade-in-up overflow-hidden">
    <div class="absolute top-0 right-0 -z-10 translate-x-1/3 -translate-y-1/4">
        <div class="w-96 h-96 bg-brand/10 rounded-full blur-3xl opacity-70"></div>
    </div>
    <div class="absolute bottom-0 left-0 -z-10 -translate-x-1/3 translate-y-1/4">
        <div class="w-72 h-72 bg-blue-100 rounded-full blur-3xl opacity-60"></div>
    </div>

    <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white border border-brand/20 shadow-sm text-brand text-sm font-semibold mb-8 backdrop-blur-sm">
        <span class="relative flex h-2.5 w-2.5">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-brand opacity-75"></span>
            <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-brand"></span>
        </span>
        Regional Sales Operations Associate - Analytics
    </div>
    <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight text-slate-900 mb-6 leading-[1.1]">
        Transforming Data into <br/>
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand to-blue-600">Revenue Excellence</span>
    </h1>
    <p class="mt-6 text-xl text-slate-600 max-w-3xl leading-relaxed md:pr-12">
        Presented by <strong class="text-slate-900">Basel Ghanem</strong>. A production-grade interactive product demonstrating strategic systems thinking, proactive leadership, and high-performance analytics architecture.
    </p>
    
    <div class="mt-10 flex flex-col sm:flex-row gap-4 items-center md:justify-start justify-center">
        <a href="#dashboard" class="px-8 py-3.5 bg-brand text-white font-semibold rounded-xl shadow-premium hover:bg-brand-dark hover:-translate-y-0.5 transition-all duration-300 flex items-center gap-2">
            Launch Analytics <i data-lucide="arrow-right" class="w-4 h-4"></i>
        </a>
        <a href="#executive" class="px-8 py-3.5 bg-white text-slate-700 font-semibold rounded-xl border border-slate-200 shadow-sm hover:bg-slate-50 transition-all duration-300">
            View Methodology
        </a>
    </div>
</header>

<section id="executive" class="py-20 bg-white border-y border-slate-200/60 relative">
    <div class="max-w-7xl mx-auto px-6">
        <div class="flex items-center gap-4 mb-12 fade-in-up">
            <div class="w-12 h-12 rounded-2xl bg-brand/10 flex items-center justify-center">
                <i data-lucide="target" class="text-brand w-6 h-6"></i>
            </div>
            <div>
                <h2 class="text-3xl font-bold text-slate-900 tracking-tight">Executive Edge</h2>
                <p class="text-slate-500 mt-1">Why I am the Ideal Candidate</p>
            </div>
        </div>
        
        <div class="grid md:grid-cols-3 gap-8">
            <div class="premium-card p-8 rounded-3xl fade-in-up">
                <div class="w-14 h-14 bg-gradient-to-br from-brand-bg to-brand/20 text-brand rounded-2xl flex items-center justify-center mb-6 shadow-sm border border-brand/10">
                    <i data-lucide="zap" class="w-7 h-7"></i>
                </div>
                <h3 class="text-xl font-bold text-slate-900 mb-3">Bias for Action</h3>
                <p class="text-slate-600 text-sm leading-relaxed">
                    Moving from raw insight to commercial execution rapidly. I build operational triggers, not just reports. Leveraging 15+ years of experience, I identify pipeline bottlenecks and instantly orchestrate corrective workflows with sales leadership.
                </p>
            </div>
            <div class="premium-card p-8 rounded-3xl fade-in-up" style="transition-delay: 100ms;">
                <div class="w-14 h-14 bg-gradient-to-br from-blue-50 to-blue-100 text-blue-600 rounded-2xl flex items-center justify-center mb-6 shadow-sm border border-blue-200">
                    <i data-lucide="database" class="w-7 h-7"></i>
                </div>
                <h3 class="text-xl font-bold text-slate-900 mb-3">Data-First Mindset</h3>
                <p class="text-slate-600 text-sm leading-relaxed">
                    A single source of truth is non-negotiable. I architect complex data models and deliver comprehensive training for advanced Power BI and Excel, ensuring teams operate on validated, structured commercial data.
                </p>
            </div>
            <div class="premium-card p-8 rounded-3xl fade-in-up" style="transition-delay: 200ms;">
                <div class="w-14 h-14 bg-gradient-to-br from-purple-50 to-purple-100 text-purple-600 rounded-2xl flex items-center justify-center mb-6 shadow-sm border border-purple-200">
                    <i data-lucide="shield-check" class="w-7 h-7"></i>
                </div>
                <h3 class="text-xl font-bold text-slate-900 mb-3">Ownership Mentality</h3>
                <p class="text-slate-600 text-sm leading-relaxed">
                    End-to-end accountability. As a regional analytics lead, I view the revenue engine as my own product. From data ingestion to the rep's daily dashboard, I own the outcome, accuracy, and adoption.
                </p>
            </div>
        </div>
    </div>
</section>

<section class="py-24 bg-slate-900 text-white relative overflow-hidden">
    <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(#099999 1px, transparent 1px); background-size: 30px 30px;"></div>
    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-brand via-blue-500 to-purple-600"></div>
    
    <div class="max-w-7xl mx-auto px-6 grid lg:grid-cols-2 gap-16 relative z-10">
        
        <div id="strategy" class="fade-in-up">
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/20 text-brand-light text-xs font-bold uppercase tracking-wider mb-6 backdrop-blur-md">
                <i data-lucide="trending-up" class="w-4 h-4"></i> Strategic Playbook
            </div>
            <h2 class="text-4xl font-extrabold mb-8 tracking-tight">Sales Strategy & Planning</h2>
            
            <div class="space-y-8">
                <div class="group">
                    <h4 class="text-xl font-semibold mb-2 flex items-center gap-2 group-hover:text-brand-light transition-colors">
                        <span class="w-6 h-6 rounded bg-brand/20 flex items-center justify-center text-xs text-brand-light">01</span>
                        Territory Planning & Capacity
                    </h4>
                    <p class="text-slate-400 leading-relaxed pl-8">Logic-driven routing based on Total Addressable Market (TAM), account density, and historical rep velocity. Balancing territories ensures equitable quota attainment and prevents burnout.</p>
                </div>
                <div class="group">
                    <h4 class="text-xl font-semibold mb-2 flex items-center gap-2 group-hover:text-brand-light transition-colors">
                        <span class="w-6 h-6 rounded bg-brand/20 flex items-center justify-center text-xs text-brand-light">02</span>
                        Pipeline & Forecasting
                    </h4>
                    <p class="text-slate-400 leading-relaxed pl-8">Transitioning from subjective "commit" calls to probability-weighted pipeline management. Forecasting grounded in historical stage conversion rates adjusted by average sales cycle length.</p>
                </div>
                <div class="group">
                    <h4 class="text-xl font-semibold mb-2 flex items-center gap-2 group-hover:text-brand-light transition-colors">
                        <span class="w-6 h-6 rounded bg-brand/20 flex items-center justify-center text-xs text-brand-light">03</span>
                        Growth Levers
                    </h4>
                    <p class="text-slate-400 leading-relaxed pl-8">Identifying adjacent product adoption, up-sell triggers based on utilization metrics, and reducing time-to-first-value to drive net revenue retention (NRR).</p>
                </div>
            </div>
        </div>

        <div id="scoring" class="fade-in-up relative" style="transition-delay: 200ms;">
            <div class="absolute -inset-4 bg-gradient-to-br from-brand/20 to-purple-600/20 blur-2xl opacity-50 -z-10 rounded-full"></div>
            <div class="bg-slate-800/80 backdrop-blur-xl p-8 rounded-3xl border border-slate-700 shadow-2xl h-full flex flex-col">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-bold flex items-center gap-3">
                        <i data-lucide="cpu" class="text-brand w-6 h-6"></i> Lead Scoring Engine
                    </h3>
                    <span class="flex h-3 w-3 relative">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
                    </span>
                </div>
                
                <div class="bg-slate-950/80 rounded-xl p-5 mb-6 font-mono text-sm border border-slate-800 shadow-inner">
                    <div class="flex gap-2 mb-2 border-b border-slate-800 pb-2">
                        <div class="w-3 h-3 rounded-full bg-red-500"></div>
                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                    </div>
                    <p class="text-slate-500">// Scoring Logic Matrix v2.1</p>
                    <p class="text-brand-light mt-1"><span class="text-purple-400">const</span> <span class="text-blue-400">Score</span> = (w1 * <span class="text-green-300">Firmographics</span>) + (w2 * <span class="text-green-300">Behavior</span>) + (w3 * <span class="text-green-300">Velocity</span>);</p>
                </div>
                
                <ul class="space-y-4 text-sm text-slate-300 flex-grow">
                    <li class="flex gap-3"><i data-lucide="arrow-right-circle" class="w-5 h-5 text-brand shrink-0"></i> <span><strong class="text-white">Inputs:</strong> Historical cancellation rate, AOV thresholds, cycle duration, vertical.</span></li>
                    <li class="flex gap-3"><i data-lucide="arrow-right-circle" class="w-5 h-5 text-brand shrink-0"></i> <span><strong class="text-white">Assumptions:</strong> Past engagement is a 2x stronger predictor than static firmographics.</span></li>
                    <li class="flex gap-3"><i data-lucide="arrow-right-circle" class="w-5 h-5 text-brand shrink-0"></i> <span><strong class="text-white">Evaluation Metrics:</strong> Conversion Lift by Decile, reduction in A-tier cycle length.</span></li>
                    <li class="flex gap-3"><i data-lucide="arrow-right-circle" class="w-5 h-5 text-brand shrink-0"></i> <span><strong class="text-white">Iteration Framework:</strong> Monthly retrospective comparing predictions vs closed-won data.</span></li>
                </ul>
            </div>
        </div>
    </div>
</section>

<section id="dashboard" class="py-20 px-4 sm:px-6 lg:px-8 max-w-[1400px] mx-auto min-h-screen flex flex-col">
    
    <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 gap-6 fade-in-up">
        <div>
            <div class="flex items-center gap-3 mb-2">
                <div class="w-10 h-10 rounded-xl bg-slate-900 text-white flex items-center justify-center shadow-lg">
                    <i data-lucide="activity" class="w-5 h-5"></i>
                </div>
                <h2 class="text-3xl font-extrabold text-slate-900 tracking-tight">Revenue Analytics OS</h2>
            </div>
            <p class="text-slate-500 text-sm ml-13 flex items-center gap-2">
                <span class="w-2 h-2 rounded-full bg-green-500"></span> Live Processing Engine Active <span class="text-slate-300 mx-1">|</span> Zero Server Latency
            </p>
        </div>
        
        <div class="w-full lg:w-auto flex flex-col sm:flex-row gap-3 bg-white p-2 rounded-2xl border border-slate-200 shadow-sm no-print relative z-20">
            <div class="relative flex-grow sm:w-64">
                <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"></i>
                <input type="text" id="filterSearch" placeholder="Search brands or orgs..." class="w-full pl-9 pr-4 py-2.5 bg-slate-50 border-none rounded-xl text-sm focus:ring-2 focus:ring-brand focus:bg-white transition-all outline-none text-slate-700">
            </div>
            
            <div class="w-px h-8 bg-slate-200 self-center hidden sm:block"></div>
            
            <div class="relative min-w-[140px]">
                <i data-lucide="calendar" class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"></i>
                <select id="filterWeek" class="w-full pl-9 pr-8 py-2.5 bg-slate-50 border-none rounded-xl text-sm focus:ring-2 focus:ring-brand focus:bg-white transition-all outline-none appearance-none cursor-pointer text-slate-700 font-medium">
                    <option value="all">All Weeks</option>
                    </select>
                <i data-lucide="chevron-down" class="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"></i>
            </div>
            
            <div class="w-px h-8 bg-slate-200 self-center hidden sm:block"></div>
            
            <div class="flex gap-2">
                <button id="exportCsvBtn" class="flex items-center justify-center w-10 h-10 rounded-xl bg-slate-50 hover:bg-slate-100 text-slate-600 transition-colors tooltip-trigger" title="Export CSV">
                    <i data-lucide="download" class="w-4 h-4"></i>
                </button>
                <button id="exportPdfBtn" class="flex items-center justify-center w-10 h-10 rounded-xl bg-slate-50 hover:bg-slate-100 text-slate-600 transition-colors tooltip-trigger" title="Print/PDF Report">
                    <i data-lucide="printer" class="w-4 h-4"></i>
                </button>
            </div>
        </div>
    </div>

    <div id="insightBanner" class="hidden mb-8 premium-card rounded-2xl p-5 border-l-4 border-l-brand flex gap-4 items-start fade-in-up">
        <div class="w-8 h-8 rounded-full bg-brand/10 flex items-center justify-center shrink-0 mt-0.5">
            <i data-lucide="sparkles" class="w-4 h-4 text-brand"></i>
        </div>
        <div>
            <h4 class="text-sm font-bold text-slate-900 mb-1">Executive Insights Generated</h4>
            <div id="insightText" class="text-sm text-slate-600 space-y-1">
                </div>
        </div>
    </div>

    <div id="dashboardSkeletons" class="grid grid-cols-1 gap-8 w-full">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
            <div class="h-32 rounded-2xl skeleton"></div>
            <div class="h-32 rounded-2xl skeleton"></div>
            <div class="h-32 rounded-2xl skeleton"></div>
            <div class="h-32 rounded-2xl skeleton"></div>
        </div>
        <div class="grid lg:grid-cols-2 gap-6">
            <div class="h-96 rounded-2xl skeleton"></div>
            <div class="h-96 rounded-2xl skeleton"></div>
        </div>
        <div class="h-64 rounded-2xl skeleton"></div>
    </div>

    <div id="dashboardContent" class="hidden opacity-0 transition-opacity duration-700 ease-in-out">
        
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="premium-card bg-white p-6 rounded-3xl relative overflow-hidden group">
                <div class="absolute top-0 right-0 p-6 opacity-10 group-hover:opacity-20 group-hover:scale-110 transition-all duration-500">
                    <i data-lucide="dollar-sign" class="w-16 h-16 text-brand"></i>
                </div>
                <p class="text-sm text-slate-500 font-semibold mb-2">Total Valid Revenue</p>
                <h3 id="kpi-revenue" class="text-3xl lg:text-4xl font-extrabold text-slate-900 tracking-tight">$0</h3>
                <div class="mt-4 flex items-center gap-2 text-sm">
                    <span id="kpi-revenue-delta" class="px-2 py-0.5 rounded-md font-bold text-xs flex items-center gap-1">--</span>
                    <span class="text-slate-400">vs prev. period</span>
                </div>
            </div>
            
            <div class="premium-card bg-white p-6 rounded-3xl relative overflow-hidden group">
                <div class="absolute top-0 right-0 p-6 opacity-10 group-hover:opacity-20 group-hover:scale-110 transition-all duration-500">
                    <i data-lucide="shopping-cart" class="w-16 h-16 text-blue-600"></i>
                </div>
                <p class="text-sm text-slate-500 font-semibold mb-2">Net Orders Executed</p>
                <h3 id="kpi-orders" class="text-3xl lg:text-4xl font-extrabold text-slate-900 tracking-tight">0</h3>
                <div class="mt-4 flex items-center gap-2 text-sm">
                    <span id="kpi-orders-delta" class="px-2 py-0.5 rounded-md font-bold text-xs flex items-center gap-1">--</span>
                    <span class="text-slate-400">vs prev. period</span>
                </div>
            </div>
            
            <div class="premium-card bg-white p-6 rounded-3xl relative overflow-hidden group">
                <div class="absolute top-0 right-0 p-6 opacity-10 group-hover:opacity-20 group-hover:scale-110 transition-all duration-500">
                    <i data-lucide="trending-up" class="w-16 h-16 text-brand"></i>
                </div>
                <p class="text-sm text-slate-500 font-semibold mb-2">Average Order Vol (AOV)</p>
                <h3 id="kpi-aov" class="text-3xl lg:text-4xl font-extrabold text-brand tracking-tight">$0</h3>
                <div class="mt-4 flex items-center gap-2 text-sm">
                    <span id="kpi-aov-delta" class="px-2 py-0.5 rounded-md font-bold text-xs flex items-center gap-1">--</span>
                    <span class="text-slate-400">vs prev. period</span>
                </div>
            </div>
            
            <div class="premium-card bg-white p-6 rounded-3xl relative overflow-hidden group">
                <div class="absolute top-0 right-0 p-6 opacity-10 group-hover:opacity-20 group-hover:scale-110 transition-all duration-500">
                    <i data-lucide="alert-triangle" class="w-16 h-16 text-red-500"></i>
                </div>
                <div id="risk-banner" class="absolute top-0 right-0 bg-red-500/10 text-red-600 text-xs font-bold px-3 py-1.5 rounded-bl-xl border-b border-l border-red-100 hidden backdrop-blur-sm">HIGH RISK</div>
                <p class="text-sm text-slate-500 font-semibold mb-2">Platform Cancel Rate</p>
                <h3 id="kpi-cancel" class="text-3xl lg:text-4xl font-extrabold text-slate-900 tracking-tight">0%</h3>
                <div class="mt-4 flex items-center gap-2 text-sm">
                    <span id="kpi-cancel-delta" class="px-2 py-0.5 rounded-md font-bold text-xs flex items-center gap-1">--</span>
                    <span class="text-slate-400">vs prev. period</span>
                </div>
            </div>
        </div>

        <div class="grid lg:grid-cols-2 gap-6 mb-8">
            <div class="premium-card bg-white p-6 rounded-3xl flex flex-col">
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <h3 class="font-bold text-lg text-slate-900">Revenue Trajectory</h3>
                        <p class="text-sm text-slate-500">Gross volume progression over time</p>
                    </div>
                    <div class="p-2 bg-slate-50 rounded-lg border border-slate-100">
                        <i data-lucide="bar-chart-3" class="w-4 h-4 text-brand"></i>
                    </div>
                </div>
                <div class="chart-container flex-grow relative w-full h-[300px]">
                    <canvas id="wowChart"></canvas>
                </div>
            </div>
            
            <div class="premium-card bg-white p-6 rounded-3xl flex flex-col">
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <h3 class="font-bold text-lg text-slate-900">Brand Concentration</h3>
                        <p class="text-sm text-slate-500">Top 5 entities driving revenue share</p>
                    </div>
                    <div class="p-2 bg-slate-50 rounded-lg border border-slate-100">
                        <i data-lucide="pie-chart" class="w-4 h-4 text-brand"></i>
                    </div>
                </div>
                <div class="chart-container flex-grow relative w-full h-[300px]">
                    <canvas id="brandChart"></canvas>
                </div>
            </div>
        </div>

        <div class="premium-card bg-white rounded-3xl overflow-hidden flex flex-col">
            <div class="p-6 border-b border-slate-100 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 bg-slate-50/50">
                <div>
                    <h3 class="font-bold text-lg text-slate-900">Brand Health & Risk Matrix</h3>
                    <p class="text-sm text-slate-500">Proprietary scoring based on weighted revenue & retention mechanics.</p>
                </div>
                <div class="text-xs font-mono text-slate-400 bg-white px-3 py-1.5 rounded-lg border border-slate-200 shadow-sm">
                    Formula: (RevNorm * 0.6) + ((1-CR) * 0.4)
                </div>
            </div>
            
            <div class="overflow-x-auto">
                <table class="w-full text-sm text-left whitespace-nowrap" id="dataTable">
                    <thead class="text-xs text-slate-500 uppercase bg-slate-50 border-b border-slate-200">
                        <tr>
                            <th class="px-6 py-4 font-semibold sortable" data-sort="brand">Brand / Org <i data-lucide="arrow-up-down" class="inline w-3 h-3 ml-1"></i></th>
                            <th class="px-6 py-4 font-semibold text-right sortable" data-sort="revenue">Revenue <i data-lucide="arrow-up-down" class="inline w-3 h-3 ml-1"></i></th>
                            <th class="px-6 py-4 font-semibold text-center sortable" data-sort="orders">Orders <i data-lucide="arrow-up-down" class="inline w-3 h-3 ml-1"></i></th>
                            <th class="px-6 py-4 font-semibold text-center sortable" data-sort="cancel">Cancel Rate <i data-lucide="arrow-up-down" class="inline w-3 h-3 ml-1"></i></th>
                            <th class="px-6 py-4 font-semibold text-center sortable w-48" data-sort="score">Health Score <i data-lucide="arrow-up-down" class="inline w-3 h-3 ml-1"></i></th>
                            <th class="px-6 py-4 font-semibold text-center">Status</th>
                        </tr>
                    </thead>
                    <tbody id="brandTableBody" class="divide-y divide-slate-100">
                        </tbody>
                </table>
            </div>
            
            <div id="tableEmptyState" class="hidden p-12 text-center flex-col items-center justify-center bg-slate-50/50">
                <i data-lucide="search-x" class="w-12 h-12 text-slate-300 mb-3 mx-auto"></i>
                <h4 class="text-slate-900 font-semibold mb-1">No brands found</h4>
                <p class="text-slate-500 text-sm">Adjust your search or filter criteria.</p>
            </div>
        </div>

    </div>
</section>

<footer class="bg-slate-950 py-10 text-center border-t border-slate-800 mt-auto no-print">
    <div class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-4">
        <div class="flex items-center gap-2 text-brand font-bold text-lg">
            <i data-lucide="bar-chart-2" class="w-5 h-5"></i> AnalyticsStrategy
        </div>
        <p class="text-slate-400 text-sm flex items-center justify-center gap-2">
            Architected by Basel Ghanem <span class="w-1 h-1 rounded-full bg-slate-600"></span> Production Release v2.0
        </p>
    </div>
</footer>

<script>
    // --- Global State & Configuration ---
    const CONFIG = {
        csvUrl: "https://raw.githubusercontent.com/BaselGhanem/AnalyticsStrategy/main/KitchenPark%20sample%20data.csv",
        colors: {
            brand: '#099999', brandLight: '#14cccc', brandDark: '#066666',
            danger: '#ef4444', warning: '#eab308', success: '#22c55e',
            chartPalette: ['#099999', '#14cccc', '#066666', '#4dd2d2', '#a6e8e8', '#1e293b']
        }
    };

    const STATE = {
        rawDataset: [],
        filteredData: [],
        filters: { week: 'all', search: '' },
        sort: { column: 'revenue', asc: false },
        charts: { wow: null, brand: null },
        metrics: { current: {}, previous: {} }
    };

    // --- Formatters & Helpers ---
    const formatters = {
        currency: new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 }),
        number: new Intl.NumberFormat('en-US', { maximumFractionDigits: 1 }),
        percent: new Intl.NumberFormat('en-US', { style: 'percent', minimumFractionDigits: 1, maximumFractionDigits: 1 })
    };

    // --- Initialization ---
    document.addEventListener('DOMContentLoaded', () => {
        lucide.createIcons();
        initScrollAnimations();
        initEventListeners();
        fetchDataset();
    });

    function initScrollAnimations() {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
        document.querySelectorAll('.fade-in-up').forEach(el => observer.observe(el));
    }

    function initEventListeners() {
        document.getElementById('filterSearch').addEventListener('input', (e) => {
            STATE.filters.search = e.target.value.toLowerCase();
            processAndRender();
        });

        document.getElementById('filterWeek').addEventListener('change', (e) => {
            STATE.filters.week = e.target.value;
            processAndRender();
        });

        document.getElementById('exportCsvBtn').addEventListener('click', exportToCSV);
        document.getElementById('exportPdfBtn').addEventListener('click', () => window.print());

        // Sortable table headers
        document.querySelectorAll('th.sortable').forEach(th => {
            th.addEventListener('click', () => {
                const col = th.dataset.sort;
                if (STATE.sort.column === col) {
                    STATE.sort.asc = !STATE.sort.asc;
                } else {
                    STATE.sort.column = col;
                    STATE.sort.asc = false;
                }
                renderTable(STATE.processedBrands); // Re-render sorted table
            });
        });
    }

    // --- Data Fetching & Core Pipeline ---
    function fetchDataset() {
        Papa.parse(CONFIG.csvUrl, {
            download: true,
            header: true,
            skipEmptyLines: true,
            complete: (results) => {
                STATE.rawDataset = results.data.map(row => ({
                    status: (row['OrderStatus'] || '').trim().toLowerCase(),
                    subtotal: parseFloat(row['Subtotal'] || row['Subtotal '] || row['Total'] || 0) || 0,
                    week: parseInt(row['week']) || 0,
                    brand: (row['brand name'] || row['Store'] || 'Unknown Brand').trim(),
                    org: (row['org name'] || 'Unknown Org').trim()
                })).filter(r => r.status); // Clean up immediately

                populateWeekDropdown();
                
                // Slight delay to show premium loading skeleton feel
                setTimeout(() => {
                    document.getElementById('dashboardSkeletons').classList.add('hidden');
                    const content = document.getElementById('dashboardContent');
                    content.classList.remove('hidden');
                    // Force reflow
                    void content.offsetWidth;
                    content.classList.remove('opacity-0');
                    
                    processAndRender();
                }, 800);
            }
        });
    }

    function populateWeekDropdown() {
        const weeks = [...new Set(STATE.rawDataset.map(r => r.week))].filter(w => w > 0).sort((a,b) => a - b);
        const select = document.getElementById('filterWeek');
        weeks.forEach(w => {
            const opt = document.createElement('option');
            opt.value = w;
            opt.textContent = `Week ${w}`;
            select.appendChild(opt);
        });
    }

    // --- Data Processing Logic ---
    function processAndRender() {
        // 1. Filter Data
        STATE.filteredData = STATE.rawDataset.filter(row => {
            const matchWeek = STATE.filters.week === 'all' || row.week.toString() === STATE.filters.week;
            const matchSearch = row.brand.toLowerCase().includes(STATE.filters.search) || row.org.toLowerCase().includes(STATE.filters.search);
            return matchWeek && matchSearch;
        });

        // 2. Aggregate Base Metrics
        const metrics = aggregateData(STATE.filteredData);
        
        // Compute Deltas (Mock logical previous period comparison based on data shape)
        // If filtering by specific week, compare to week-1. If 'all', compare total dataset halves logic (simplified).
        const prevMetrics = calculatePreviousPeriodMetrics();
        
        // 3. Process Brand Data for Table
        const brands = processBrandHealth(STATE.filteredData);
        STATE.processedBrands = brands; // Store for sorting
        
        // 4. Update UI Components
        updateKPIs(metrics, prevMetrics);
        updateCharts(STATE.filteredData, brands);
        renderTable(brands);
        generateInsights(metrics, brands);
    }

    function aggregateData(dataSubset) {
        let revenue = 0, orders = 0, cancels = 0;
        dataSubset.forEach(r => {
            if (r.status === 'canceled') {
                cancels++;
            } else {
                revenue += r.subtotal;
                orders++;
            }
        });
        const total = orders + cancels;
        return {
            revenue,
            netOrders: orders,
            cancels,
            totalOrders: total,
            cancelRate: total > 0 ? (cancels / total) : 0,
            aov: orders > 0 ? (revenue / orders) : 0
        };
    }

    function calculatePreviousPeriodMetrics() {
        // Advanced logic: if week is selected, find week-1 data. Else fallback.
        let prevData = [];
        if (STATE.filters.week !== 'all') {
            const prevWeek = parseInt(STATE.filters.week) - 1;
            prevData = STATE.rawDataset.filter(r => r.week === prevWeek);
        } else {
             // For 'all', just return 0 to show flat/no comparison, or mock average.
             // We'll return empty to hide deltas cleanly.
             return null; 
        }
        return aggregateData(prevData);
    }

    function processBrandHealth(dataSubset) {
        const bMap = {};
        dataSubset.forEach(r => {
            if (!bMap[r.brand]) {
                bMap[r.brand] = { name: r.brand, org: r.org, revenue: 0, orders: 0, cancels: 0 };
            }
            if (r.status === 'canceled') bMap[r.brand].cancels++;
            else {
                bMap[r.brand].revenue += r.subtotal;
                bMap[r.brand].orders++;
            }
        });

        const brands = Object.values(bMap);
        const maxRev = brands.length ? Math.max(...brands.map(b => b.revenue)) : 0;

        return brands.map(b => {
            const total = b.orders + b.cancels;
            b.cancelRate = total > 0 ? (b.cancels / total) : 0;
            const normRev = maxRev > 0 ? (b.revenue / maxRev) : 0;
            b.score = ((normRev * 0.6) + ((1 - b.cancelRate) * 0.4)) * 100;
            return b;
        });
    }

    // --- UI Updaters ---
    function animateValue(obj, start, end, duration, formatterFn) {
        let startTimestamp = null;
        const step = (timestamp) => {
            if (!startTimestamp) startTimestamp = timestamp;
            const progress = Math.min((timestamp - startTimestamp) / duration, 1);
            // easeOutQuart
            const easeProgress = 1 - Math.pow(1 - progress, 4); 
            const current = progress * (end - start) + start;
            obj.innerHTML = formatterFn(current);
            if (progress < 1) {
                window.requestAnimationFrame(step);
            } else {
                obj.innerHTML = formatterFn(end);
            }
        };
        window.requestAnimationFrame(step);
    }

    function updateDeltaBadge(elId, currentVal, prevVal, invertGoodBad = false) {
        const el = document.getElementById(elId);
        if (prevVal === undefined || prevVal === null || prevVal === 0) {
            el.innerHTML = '--';
            el.className = 'px-2 py-0.5 rounded-md font-bold text-xs flex items-center gap-1 bg-slate-100 text-slate-500';
            return;
        }
        
        const pctChange = ((currentVal - prevVal) / prevVal) * 100;
        const isPositive = pctChange >= 0;
        
        let isGood = isPositive;
        if (invertGoodBad) isGood = !isPositive; // e.g. Cancel rate up is bad

        const colorClass = isGood ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700';
        const icon = isPositive ? '▲' : '▼';
        
        el.className = `px-2 py-0.5 rounded-md font-bold text-xs flex items-center gap-1 transition-all ${colorClass}`;
        el.innerHTML = `${icon} ${Math.abs(pctChange).toFixed(1)}%`;
    }

    function updateKPIs(metrics, prevMetrics) {
        const els = {
            rev: document.getElementById('kpi-revenue'),
            ord: document.getElementById('kpi-orders'),
            aov: document.getElementById('kpi-aov'),
            can: document.getElementById('kpi-cancel')
        };

        // Get old values (strip formatting)
        const oldRev = parseFloat(els.rev.innerText.replace(/[^0-9.-]+/g,"")) || 0;
        const oldOrd = parseInt(els.ord.innerText.replace(/,/g, "")) || 0;
        const oldAov = parseFloat(els.aov.innerText.replace(/[^0-9.-]+/g,"")) || 0;
        const oldCan = parseFloat(els.can.innerText.replace(/%/g,"")) || 0;

        // Animate
        animateValue(els.rev, oldRev, metrics.revenue, 1000, val => formatters.currency.format(val));
        animateValue(els.ord, oldOrd, metrics.netOrders, 1000, val => Math.floor(val).toLocaleString());
        animateValue(els.aov, oldAov, metrics.aov, 1000, val => formatters.currency.format(val));
        animateValue(els.can, oldCan, metrics.cancelRate * 100, 1000, val => formatters.number.format(val) + '%');

        // Deltas
        const hasPrev = prevMetrics !== null;
        updateDeltaBadge('kpi-revenue-delta', metrics.revenue, hasPrev ? prevMetrics.revenue : null);
        updateDeltaBadge('kpi-orders-delta', metrics.netOrders, hasPrev ? prevMetrics.netOrders : null);
        updateDeltaBadge('kpi-aov-delta', metrics.aov, hasPrev ? prevMetrics.aov : null);
        updateDeltaBadge('kpi-cancel-delta', metrics.cancelRate, hasPrev ? prevMetrics.cancelRate : null, true); // Invert: cancel up is bad

        // Risk Banner
        const banner = document.getElementById('risk-banner');
        if (metrics.cancelRate > 0.10) {
            banner.classList.remove('hidden');
            els.can.classList.replace('text-slate-900', 'text-red-600');
        } else {
            banner.classList.add('hidden');
            els.can.classList.replace('text-red-600', 'text-slate-900');
        }
    }

    function updateCharts(dataSubset, brandData) {
        // WoW Chart Prep
        Chart.defaults.font.family = "'Inter', sans-serif";
        Chart.defaults.color = '#64748b';

        // Aggregate by week for chart
        const wMap = {};
        dataSubset.forEach(r => {
            if (r.status !== 'canceled' && r.week) {
                wMap[r.week] = (wMap[r.week] || 0) + r.subtotal;
            }
        });
        const weeks = Object.keys(wMap).sort((a,b) => parseInt(a)-parseInt(b));
        
        if (STATE.charts.wow) STATE.charts.wow.destroy();
        
        const wowCtx = document.getElementById('wowChart').getContext('2d');
        const gradient = wowCtx.createLinearGradient(0, 0, 0, 300);
        gradient.addColorStop(0, 'rgba(9, 153, 153, 0.4)');
        gradient.addColorStop(1, 'rgba(9, 153, 153, 0.0)');

        STATE.charts.wow = new Chart(wowCtx, {
            type: 'line',
            data: {
                labels: weeks.map(w => `W${w}`),
                datasets: [{
                    label: 'Gross Revenue',
                    data: weeks.map(w => wMap[w]),
                    borderColor: CONFIG.colors.brand,
                    backgroundColor: gradient,
                    borderWidth: 3,
                    tension: 0.4,
                    fill: true,
                    pointBackgroundColor: '#ffffff',
                    pointBorderColor: CONFIG.colors.brand,
                    pointBorderWidth: 2,
                    pointRadius: 4,
                    pointHoverRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { mode: 'index', intersect: false },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: 'rgba(15, 23, 42, 0.9)',
                        padding: 12,
                        titleFont: { size: 13, weight: 'bold' },
                        bodyFont: { size: 14 },
                        callbacks: { label: (ctx) => formatters.currency.format(ctx.parsed.y) }
                    }
                },
                scales: {
                    y: { 
                        beginAtZero: true, 
                        grid: { borderDash: [4, 4], color: '#f1f5f9' },
                        border: { display: false },
                        ticks: { callback: (val) => '$' + (val/1000) + 'k' }
                    },
                    x: { 
                        grid: { display: false },
                        border: { display: false }
                    }
                }
            }
        });

        // Brand Chart Prep (Top 5)
        const topBrands = [...brandData].sort((a,b) => b.revenue - a.revenue).slice(0, 5);
        
        if (STATE.charts.brand) STATE.charts.brand.destroy();
        
        STATE.charts.brand = new Chart(document.getElementById('brandChart'), {
            type: 'doughnut',
            data: {
                labels: topBrands.map(b => b.name),
                datasets: [{
                    data: topBrands.map(b => b.revenue),
                    backgroundColor: CONFIG.colors.chartPalette,
                    borderWidth: 2,
                    borderColor: '#ffffff',
                    hoverOffset: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '65%',
                plugins: {
                    legend: { position: 'right', labels: { usePointStyle: true, padding: 20, font: { size: 12 } } },
                    tooltip: {
                        backgroundColor: 'rgba(15, 23, 42, 0.9)',
                        padding: 12,
                        callbacks: {
                            label: (ctx) => {
                                const val = formatters.currency.format(ctx.raw);
                                const total = ctx.dataset.data.reduce((a, b) => a + b, 0);
                                const pct = ((ctx.raw / total) * 100).toFixed(1) + '%';
                                return ` ${val} (${pct})`;
                            }
                        }
                    }
                }
            }
        });
    }

    function renderTable(brands) {
        const tbody = document.getElementById('brandTableBody');
        const emptyState = document.getElementById('tableEmptyState');
        tbody.innerHTML = '';

        if (brands.length === 0) {
            emptyState.classList.remove('hidden');
            emptyState.classList.add('flex');
            return;
        } else {
            emptyState.classList.add('hidden');
            emptyState.classList.remove('flex');
        }

        // Apply Sorting
        const col = STATE.sort.column;
        const asc = STATE.sort.asc ? 1 : -1;
        
        brands.sort((a, b) => {
            if (col === 'brand') return a.name.localeCompare(b.name) * asc;
            return (a[col] - b[col]) * asc;
        });

        // Update sort icons
        document.querySelectorAll('th.sortable i').forEach(icon => {
            icon.setAttribute('data-lucide', 'arrow-up-down');
            icon.classList.remove('text-brand');
        });
        const activeTh = document.querySelector(`th[data-sort="${col}"]`);
        if(activeTh) {
            const icon = activeTh.querySelector('i');
            icon.setAttribute('data-lucide', asc === 1 ? 'arrow-up' : 'arrow-down');
            icon.classList.add('text-brand');
        }
        lucide.createIcons(); // re-init icons

        // Render top 20 to prevent DOM overload
        brands.slice(0, 20).forEach(b => {
            const isDanger = b.cancelRate > 0.10;
            const healthColor = b.score > 75 ? 'bg-green-500' : b.score > 40 ? 'bg-yellow-400' : 'bg-red-500';
            
            let statusBadge = '';
            if (isDanger) statusBadge = '<span class="px-2.5 py-1 bg-red-50 text-red-700 border border-red-200 rounded-md text-xs font-bold shadow-sm">Review</span>';
            else if (b.score > 75) statusBadge = '<span class="px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded-md text-xs font-bold shadow-sm">Healthy</span>';
            else statusBadge = '<span class="px-2.5 py-1 bg-yellow-50 text-yellow-700 border border-yellow-200 rounded-md text-xs font-bold shadow-sm">Monitor</span>';

            const tr = document.createElement('tr');
            tr.className = 'hover:bg-slate-50 transition-colors group';
            tr.innerHTML = `
                <td class="px-6 py-4">
                    <div class="font-bold text-slate-900 group-hover:text-brand transition-colors">${b.name.length > 30 ? b.name.substring(0, 30)+'...' : b.name}</div>
                    <div class="text-xs text-slate-500 mt-0.5">${b.org}</div>
                </td>
                <td class="px-6 py-4 text-right font-medium text-slate-900 tabular-nums">${formatters.currency.format(b.revenue)}</td>
                <td class="px-6 py-4 text-center text-slate-600 tabular-nums">${b.orders}</td>
                <td class="px-6 py-4 text-center tabular-nums font-medium ${isDanger ? 'text-red-600 bg-red-50/50' : 'text-slate-600'}">${(b.cancelRate * 100).toFixed(1)}%</td>
                <td class="px-6 py-4">
                    <div class="flex items-center gap-3">
                        <span class="font-mono font-medium text-sm w-8 text-right">${b.score.toFixed(0)}</span>
                        <div class="flex-grow h-2 bg-slate-100 rounded-full overflow-hidden shadow-inner">
                            <div class="h-full rounded-full ${healthColor} transition-all duration-1000" style="width: ${b.score}%"></div>
                        </div>
                    </div>
                </td>
                <td class="px-6 py-4 text-center">${statusBadge}</td>
            `;
            tbody.appendChild(tr);
        });
    }

    function generateInsights(metrics, brands) {
        const banner = document.getElementById('insightBanner');
        const container = document.getElementById('insightText');
        container.innerHTML = '';
        
        let insights = [];

        // Insight 1: Concentration
        if (brands.length > 0) {
            const topBrand = [...brands].sort((a,b) => b.revenue - a.revenue)[0];
            const pct = ((topBrand.revenue / metrics.revenue) * 100).toFixed(1);
            insights.push(`<strong>${topBrand.name}</strong> commands <strong>${pct}%</strong> of total filtered revenue. Ensure account management tier reflects this dependency.`);
        }

        // Insight 2: Risk
        if (metrics.cancelRate > 0.10) {
            insights.push(`<span class="text-red-600 font-medium">Critical Alert:</span> Aggregate cancellation rate is <strong>${(metrics.cancelRate*100).toFixed(1)}%</strong>. Exceeds 10% operational safety threshold.`);
        } else {
            insights.push(`Platform cancellation stability is maintained at <strong>${(metrics.cancelRate*100).toFixed(1)}%</strong>.`);
        }

        // Output
        if(insights.length > 0) {
            insights.forEach(text => {
                const p = document.createElement('p');
                p.innerHTML = `• ${text}`;
                container.appendChild(p);
            });
            banner.classList.remove('hidden');
        } else {
            banner.classList.add('hidden');
        }
    }

    function exportToCSV() {
        if (!STATE.processedBrands || !STATE.processedBrands.length) return;
        
        const headers = ["Brand Name", "Organization", "Revenue", "Net Orders", "Cancel Rate %", "Health Score"];
        const rows = STATE.processedBrands.map(b => [
            `"${b.name.replace(/"/g, '""')}"`,
            `"${b.org.replace(/"/g, '""')}"`,
            b.revenue.toFixed(2),
            b.orders,
            (b.cancelRate * 100).toFixed(2),
            b.score.toFixed(2)
        ]);
        
        const csvContent = "data:text/csv;charset=utf-8," + [headers.join(","), ...rows.map(e => e.join(","))].join("\n");
        const encodedUri = encodeURI(csvContent);
        const link = document.createElement("a");
        link.setAttribute("href", encodedUri);
        link.setAttribute("download", `Analytics_Export_${STATE.filters.week === 'all' ? 'All' : 'Week_'+STATE.filters.week}.csv`);
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }
</script>
</body>
</html>
